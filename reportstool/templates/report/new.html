{% extends "layout.html" %}
{% block title %}New Report{% endblock %}

{% block content %}
<form method="post">
  <label for="id-name">Report name:</label><input type="text" name="name" id="id-name" style="width: 100%" />
  <label for="id-sql">SQL:</label><textarea name="sql" id="id-sql" placeholder="SQL"></textarea>
  <label for="id-template_headers">Table Header:</label><input type="text" name="template_headers" id="id-template_headers" style="width: 100%" placeholder"Table header"/>
  <label for="id-template">Table Row Template:</label><textarea name="template" id="id-template" placeholder="Template"></textarea>
  <label for="id-defaults">Defaults:</label><textarea name="defaults" id="id-defaults" placeholder="Default Values">{}</textarea>
  <input type="submit" value="Add report!" />
</form>

<h2>Tips and Tricks</h2>
<ul>
  <li>The 'SQL' bit is what will be run against the DB.</li>
  <li>The 'Table Row Template' is how the results from the DB will be formatted; it's a <a href="http://jinja.pocoo.org/docs/templates/">jinja2</a> template for a single row of the results table. The result row that's being formatted will be in the 'row' variable, which is a tuple. So, the first column you SELECT from the database will be 'row.0', the next 'row.1', etc.</li>
  <li>The 'Table Header' is the header of the table. Put in a few &lt;th&gt; to label your columns.</li>
  <li>The 'Report name' is exactly what it sounds like!</li>
  <li>Unless the result set is really big, your report should be cached for an hour. You can tell, on the view page, by looking at the "Rendered" time.</li>
</ul>
{% endblock %}
